<div class="clear30 hidden-xs"></div>
<div map-lazy-load="https://maps.google.com/maps/api/js" map-lazy-load-params="{{googleMapsUrl}}">
    <ng-map id="mealsMap" center='current-position' geo-fallback-center="[-37.814, 144.96332]" zoom="9" max style="display: block" class="map-height">
        <div ng-repeat="meal in mealsWeekDaysFilter = (meals | filter: futurMealsFilter | filter: weekDaysFilter | filter: dateRangeFilter | filter: priceRangeFilter | filter: cityRangeFilter | filter: veggiesFilter | filter : veganFilter | filter : preferenceFilter | filter : helpingTypeFilter)">
            <marker position="{{meal.address.lat}},{{meal.address.lng}}" id="{{meal._id}}" on-click="openInfowindow()"></marker>
            <info-window id="{{meal._id}}">
                <div class="container-fluid">
                    <div>
                        <img src="static/sources/createMeal/cutlery_menu_24px.png" style="position:static;margin-left:-15px">
                        <div style="padding-left:15px; margin-top:-20px">
                            <strong>{{meal.menu.title}}</strong>
                        </div>
                    </div>
                    <div class="clear10"></div>
                    <div class="clear10 map-meal-separation"></div>
                    <div>
                        <i class="glyphicon glyphicon-calendar"></i> {{meal.time |date:'EEEE dd MMMM'}}
                    </div>
                    <div class="clear5"></div>
                    <div>
                        <i class="glyphicon glyphicon-time"></i> {{meal.time|date:'HH:mm'}}
                    </div>
                    <div class="clear5"></div>
                    <div>
                        <i class="glyphicon glyphicon-piggy-bank"></i> From <strong class="meal-price text-success">{{meal.currency_symbol}} {{meal.mealPrice}}</strong>
                    </div>
                    <div ng-if="meal.veggies == true || meal.vegan == true">
                        <div class="clear5"></div>
                        <img src="static/sources/vegetarian.png" style="width:14px; height:14px"> <span ng-if="meal.veggies==true">Vegetarian</span><span ng-if="meal.vegan==true">Vegan</span> meal
                    </div>
                    <div class="clear10"></div>
                    <div class="text-center">
                        <a ng-if="!datasUserForEachMeal(meal)" ng-click=openModalDtld(meal._id) class="btn btn-primary btn-xs">Subscribe</a>
                        <a ng-if="datasUserForEachMeal(meal)" ng-click=openModalDtld(meal._id) class="btn btn-success btn-xs">See meal</a>
                    </div>
                    <div class="clear10"></div>
                    <div class="clear10 map-meal-separation"></div>
                    <div>
                        <strong>The host:</strong>
                    </div>
                    <div class="clear10"></div>
                    <div>
                        <a ui-sref="profile({userId:meal.admin._id})"><img ng-src="{{meal.admin.picture.data.url}}" style="border-radius:10px;width:50px; height:50px; margin-bottom:20px" class="pull-left" alt="User profile picture" /></a>
                        <div style="position:relative; left:10px;">
                            <div>
                                <a ui-sref="profile({userId: meal.admin._id})"><strong class="text-info">{{meal.admin.first_name}} {{meal.admin.last_name}}</strong></a>
                            </div>
                            <div class="small" style="padding-top:4px">
                                <span ng-if="meal.admin.gender"><i class="fa fa-venus-mars"></i> {{meal.admin.gender | capitalizeFirstLetter}}</br></span>
                                <span ng-if="meal.admin.birthdate"><i class="fa fa-birthday-cake"></i> {{meal.admin.birthdate | ageFilter}} years old</br></span>
                                <span ng-if="meal.admin.country_of_origin"><i class="fa fa-globe"></i> From {{meal.admin.country_of_origin.name}}</br></span>
                            </div>
                            <div class="clear5"></div>
                            <div class="well well-sm well-resume-rating" style="border:initial; margin-left:-11px; margin-top:-20px" ng-if="meal.admin.reviews.positive || meal.admin.reviews.neutral || meal.admin.reviews.negative">
                                <table style="text-align:center">
                                    <tbody>
                                        <tr>
                                            <td style="padding:0px 4px" ng-if="meal.admin.reviews.positive"><span class="glyphicon glyphicon-plus-sign text-success"></span></td>
                                            <td style="padding:0px 4px" ng-if="meal.admin.reviews.neutral"><span class="glyphicon glyphicon-record text-default"></span></td>
                                            <td style="padding:0px 4px" ng-if="meal.admin.reviews.negative"><span class="glyphicon glyphicon-minus-sign text-danger"></span></td>
                                        </tr>
                                        <tr style="font-size:11px">
                                            <td style="padding:0px 4px" ng-if="meal.admin.reviews.positive">{{meal.admin.reviews.positive}}</td>
                                            <td style="padding:0px 4px" ng-if="meal.admin.reviews.neutral">{{meal.admin.reviews.neutral}}</td>
                                            <td style="padding:0px 4px" ng-if="meal.admin.reviews.negative">{{meal.admin.reviews.negative}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </info-window>
        </div>
    </ng-map>
</div>
