<div class="clear30 hidden-xs"></div>
<div map-lazy-load="https://maps.google.com/maps/api/js" map-lazy-load-params="{{googleMapsUrl}}">
    <ng-map id="mealsMap" center='current-position' geo-fallback-center="[-37.814, 144.96332]" zoom="9" max style="display: block" class="map-height">
        <span ng-repeat="meal in mealsWeekDaysFilter = (meals | filter: weekDaysFilter | filter: dateRangeFilter | filter: priceRangeFilter | filter: cityRangeFilter | filter: veggiesFilter | filter : veganFilter)">
            <marker position="{{meal.address.lat}},{{meal.address.lng}}" id="{{meal._id}}" on-click="openInfowindow()"></marker>
            <info-window id="{{meal._id}}">
                <div class="container-fluid">  
                    <div class="cutlery-menu map-menu">
                        <strong class="map-text-menu"> {{meal.menu.title}} </strong>
                    </div>
                    <div>
                        <span class="date-calendar map-date"> {{meal.time | date:'EEEE dd MMMM'}} </span>
                        <span class="time-calendar map-time"> {{meal.time | date:'HH:mm'}} </span>
                    </div>
                    <div class="clear10"></div>
                        <span class="price-banknote map-price" ng-bind-html="meal.priceSentence"></span>
                    <div class="clear10"></div>
                      <span ng-if="meal.veggies == true || meal.vegan == true"><img src="/static/sources/vegetarian.png" style="width:14px; height:14px"> <span ng-if="meal.veggies==true">Vegetarian</span><span ng-if="meal.vegan==true">Vegan</span> meal</span>
                    <div class="clear10" ng-if="meal.veggies == true || meal.vegan == true"></div>
                    <div>
                        <div>
                            <strong>Hosted by:</strong>
                        </div>
                        <div style="float:right;">
                            <a ui-sref="profile({userId:meal.admin._id})">
                                <span class="meal-admin meal-admin-name"> {{meal.admin.first_name}} {{meal.admin.last_name}} </span>
                                <img class="img-circle profilePic" style="margin-left: 10px;margin-bottom: 0px;" ng-src="{{meal.admin.picture.data.url}}" alt="User profile picture" /></a>
                        </div>
                        <div class="clear10"></div>
                    </div>
                    <div class="text-center" style="width:110%">
                        <a ng-if="meal.detailedInfo.subscribed==false" ng-click=openModalDtld(meal._id) class="btn btn-primary btn-sm">Subscribe</a>
                        <a ng-if="meal.detailedInfo.subscribed==true" ng-click=openModalDtld(meal._id) class="btn btn-success btn-sm">See meal</a>
                    </div>
                </div>
            </info-window>
        </span>
    </ng-map>
</div>