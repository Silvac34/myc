<div class="clear20"></div>
<div class="container">
    <h1 class="general-title" translate>CREATE_A_MEAL.TITLE</h1>
    <form class="form-horizontal createMealForm" #createMealForm="ngForm">
        <fieldset>
            <div class="row">
                <h4><em translate>CREATE_A_MEAL.FORM.PUBLIC_INFO</em></h4>
            </div>
            <div class="clear10"></div>
            <div class="row">
                <div class="col-sm-12">
                    <div class="form-group" ng-class="{'has-error': createMealForm.inputMenu.$invalid && (createMealForm.inputMenu.$touched || createMealForm.$submitted)};">
                        <input type="text" class="form-control cutlery-menu" placeholder="{{'CREATE_A_MEAL.FORM.MENU_TITLE'|translate}}" name="menuTitle" [(ngModel)]="editedMeal.menu.title" required>
                    </div>
                    <div class="form-group">
                        <textarea type="text" class="form-control" placeholder="{{'CREATE_A_MEAL.FORM.MENU_DESCRIPTION'|translate}}" [(ngModel)]="editedMeal.menu.description" name="menuDescription"></textarea>
                    </div>
                    <div class="form-group">
                        <span style="margin-right:10px"><em translate>CREATE_A_MEAL.FORM.SPECIAL_MEAL.TITLE</em> <i class="fa fa-info-circle" ngbTooltip="{{'CREATE_A_MEAL.FORM.SPECIAL_MEAL.TOOLTIP'|translate}}" tooltip-trigger="mouseenter" tooltip-placement="top" translate></i>
                        </span>
                        <div class="checkbox" style="margin-bottom:5px;">
                            <label for="veggies" class="form-design-veggies">
                            <input type="checkbox" [(ngModel)]="editedMeal.veggies" name="veggies" ng-change="editedMeal.vegan = false"><span translate>CREATE_A_MEAL.FORM.VEGETARIAN</span>
                        </label>
                            <label for="vegan" class="form-design-vegan">
                            <input type="checkbox" [(ngModel)]="editedMeal.vegan" name="vegan" ng-change="editedMeal.veggies = false"><span translate>CREATE_A_MEAL.FORM.VEGAN</span>
                        </label>
                            <label for="halal" class="form-design-halal">
                            <input type="checkbox" [(ngModel)]="editedMeal.halal" name="halal"><span translate>CREATE_A_MEAL.FORM.HALAL</span>
                        </label>
                            <label for="kosher" class="form-design-kosher">
                            <input type="checkbox" [(ngModel)]="editedMeal.kosher" name="kosher"><span translate>CREATE_A_MEAL.FORM.KOSHER</span>
                        </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-8 col-xs-12" style="max-width:230px; margin-right:30px">
                    <div class="form-group" ng-class="{'has-error': createMealForm.formDate.$invalid && (createMealForm.formDate.$touched || createMealForm.$submitted)}">
                        <div class="inner-addon left-addon">
                            <i class="glyphicon glyphicon glyphicon-calendar"></i>
                        </div>
                        <!--<input type="text" class="form-control" style="text-indent:20px" name="formDate" ngbDatepicker #d="ngbDatepicker" popup-placement="bottom-left" ng-click="date_open()" [(ngModel)]="editedMeal.time" is-open="date_popup.opened" datepicker-options="dateOptions"
                            ng-required="true" close-text="Close" alt-input-formats="altInputDateFormats" placeholder="{{'CREATE_A_MEAL.FORM.DATE'|translate}}" />-->
                    </div>
                </div>
                <div class="col-sm-4 col-xs-10" style="max-width:100px">
                    <div class="form-group" ng-class="{'has-error': createMealForm.formTime.$invalid && (createMealForm.formTime.$touched || createMealForm.$submitted)}" style="padding-right:5px;">
                        <div class="inner-addon left-addon">
                            <i class="glyphicon glyphicon glyphicon-time"></i>
                            <!--<input type="text" name="formTime" class="form-control" uib-popover-template="'../static/viewCreateMeal/viewCreateMealModal/PopoverTimepickerTemplate.html'" popover-trigger="'outsideClick'" popover-placement="bottom-left" popover-title="{{'CREATE_A_MEAL.FORM.TIMEPICKER_TITLE'|translate}}"
                                value="{{editedMeal.time | date:'HH:mm'}}" required>-->
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <table class="table table-hover" style="line-height:inherit;">
                    <thead>
                        <tr>
                            <th></th>
                            <th class="text-center" style="width:80px; padding-bottom:11px"><span ngbTooltip="{{'CREATE_A_MEAL.FORM.PARTICIPANTS'|translate}}" tooltip-trigger="mouseenter" tooltip-placement="top"><img src="/assets/images/create_meal/multiple-users-silhouette.png" height="18px" width="18px"></span></th>
                            <th class="text-center" style="width:95px"><span class="glyphicon glyphicon-time" style="font-size:18px" ngbTooltip="{{'CREATE_A_MEAL.FORM.ARRIVAL_TIME'|translate}}" tooltip-trigger="mouseenter" tooltip-placement="top"></span></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="table-meal-border">
                            <td translate>CREATE_A_MEAL.FORM.HOST.NAME</td>
                            <td class="text-center">1</td>
                            <td class="text-center"></td>
                        </tr>
                        <tr class="table-meal-border">
                            <td style="vertical-align:middle"><span ngbTooltip="{{'CREATE_A_MEAL.FORM.HELP_COOKING.TOOLTIP'|translate}}" tooltip-trigger="mouseenter" tooltip-placement="top-left" translate>CREATE_A_MEAL.FORM.HELP_COOKING.NAME</span></td>
                            <td class="text-center"><input type="number" min="0" class="form-control text-center" [(ngModel)]="editedMeal.detailedInfo.requiredGuests.cooks.nbRquCooks" name="nbRquCooks"></td>
                            <td class="text-center" ng-class="{'has-error': createMealForm.timeCooking.$invalid && (createMealForm.timeCooking.$touched || createMealForm.$submitted)}"><input type="time" name="timeCooking" class="form-control text-center" [(ngModel)]="editedMeal.detailedInfo.requiredGuests.cooks.timeCooking" ng-required="editedMeal.detailedInfo.requiredGuests.cooks.nbRquCooks>0"></td>
                        </tr>
                        <tr class="table-meal-border">
                            <td style="vertical-align:middle"><span ngbTooltip="{{'CREATE_A_MEAL.FORM.HELP_CLEANING.TOOLTIP'|translate}}" tooltip-trigger="mouseenter" tooltip-placement="top-left" translate>CREATE_A_MEAL.FORM.HELP_CLEANING.NAME</span></td>
                            <td class="text-center"><input type="number" min="0" class="form-control text-center" [(ngModel)]="editedMeal.detailedInfo.requiredGuests.cleaners.nbRquCleaners" name="nbRquCleaners"></td>
                            <td class="text-center"><input type="time" class="form-control text-center" [(ngModel)]="editedMeal.detailedInfo.requiredGuests.cleaners.timeCleaning" name="timeCleaning"></td>
                        </tr>
                        <tr class="table-meal-border">
                            <td style="vertical-align:middle"><span ngbTooltip="People won't help but will pay more to give you and your helpers a meal price discount" tooltip-trigger="mouseenter" tooltip-placement="top-left">Simple guest</span></td>
                            <td class="text-center"><input type="number" min="0" class="form-control text-center" [(ngModel)]="editedMeal.detailedInfo.requiredGuests.simpleGuests.nbRquSimpleGuests" name="nbRquSimpleGuests"></td>
                            <td class="text-center" style="vertical-align:middle"><span ng-show="editedMeal.detailedInfo.requiredGuests.simpleGuests.nbRquSimpleGuests">{{editedMeal.time | date:'HH:mm'}}</span></td>
                        </tr>
                        <tr class="table-meal-border table-meal-border-bottom">
                            <td translate>CREATE_A_MEAL.FORM.TOTAL</td>
                            <td class="text-center">{{editedMeal.detailedInfo.requiredGuests.cooks.nbRquCooks + editedMeal.detailedInfo.requiredGuests.cleaners.nbRquCleaners + editedMeal.detailedInfo.requiredGuests.simpleGuests.nbRquSimpleGuests + 1}}
                            </td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <div class="form-group">
                        <div class="input-group" ng-class="{'has-error': createMealForm.price.$invalid && (createMealForm.price.$touched || createMealForm.$submitted)}">
                            <span class="input-group-addon meal-addon-groceries">{{editedMeal.currency_symbol}}</span>
                            <input type="number" name="price" class="form-control" style="width:180px" [(ngModel)]="editedMeal.price" placeholder="{{'CREATE_A_MEAL.FORM.GROCERIES_PRICE' | translate}}" min="0" required/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <h4><em translate>CREATE_A_MEAL.FORM.PRIVATE_INFO</em></h4>
            </div>
            <div class="clear10"></div>
            <div class="row">
                <div class="col-sm-12">
                    <div class="form-group" ng-class="{'has-error': (details.vicinity==undefined)  && (createMealForm.address.$touched ||createMealForm.$submitted)}">
                        <div class="inner-addon left-addon">
                            <i class="glyphicon glyphicon glyphicon-map-marker"></i>
                            <input type="text" name="address" class="form-control" placeholder="{{'CREATE_A_MEAL.FORM.ADDRESS'|translate}}" ng-autocomplete [(ngModel)]="autocompleteAddress" options="options" details="details" required/>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12">
                    <div class="form-group">
                        <input type="text" class="form-control" style="font-size:80%" placeholder="{{'CREATE_A_MEAL.FORM.ADDRESS_COMPLEMENT'|translate}}" [(ngModel)]="editedMeal.privateInfo.address.complement" name="addressComplement">
                    </div>
                </div>
            </div>
            <!--<div class="row">
                <div class="col-sm-6">
                    <div class="form-group" ng-class="{'has-error': (createMealForm.cellphone.$invalid || createMealForm.cellphone.$error.required) && createMealForm.$submitted};">
                        <div class="inner-addon left-addon">
                            <i class="glyphicon glyphicon glyphicon-earphone"></i>
                            <input type="tel" pattern="^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,5})|(\(?\d{2,6}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$" class="form-control" name="cellphone" placeholder="{{'CREATE_A_MEAL.FORM.CELLPHONE.NAME'|translate}}" [(ngModel)]="user.privateInfo.cellphone"
                                ngbTooltip="{{'CREATE_A_MEAL.FORM.CELLPHONE.TOOLTIP'|translate}}" tooltip-trigger="outsideClick" tooltip-placement="bottom-left" required/>
                        </div>
                    </div>
                </div>
            </div>-->
            <div class="row" ng-show="(createMealForm.$invalid || (editedMeal.detailedInfo.requiredGuests.cooks.timeCooking > editedMeal.time) || createMealForm.cellphone.$invalid || createMealForm.cellphone.$error.required)  && createMealForm.$submitted">
                <div class="alert alert-dismissible alert-danger">
                    <span ng-repeat="error in createMealForm.$error.required"><span ng-show="$first"><span translate>CREATE_A_MEAL.FORM.ERROR.TITLE_1</span><span ng-if="createMealForm.$error.required.length > 1" translate>CREATE_A_MEAL.FORM.ERROR.TITLE_2</span>                    <span translate>CREATE_A_MEAL.FORM.ERROR.TITLE_3</span></span> <span ng-if="error.$name == 'inputMenu'" translate>CREATE_A_MEAL.FORM.ERROR.MENU</span>
                    <span ng-if="error.$name == 'price'" translate>CREATE_A_MEAL.FORM.ERROR.GROCERIES_PRICE</span><span ng-if="error.$name == 'address'" translate>CREATE_A_MEAL.FORM.ERROR.ADDRESS</span><span ng-if="error.$name == 'timeCooking'" translate>CREATE_A_MEAL.FORM.ERROR.ARRIVAL_TIME_HELP_COOKING</span>
                    <span
                        ng-show="error.$name == 'cellphone'" translate>CREATE_A_MEAL.FORM.ERROR.CELLPHONE</span>
                        <span ng-hide="$last== true">, </span><span ng-show="$last">.</span></span>
                        <br ng-if="createMealForm.$error.required.length>0">
                        <span ng-if="createMealForm.cellphone.$invalid && createMealForm.cellphone.$dirty" translate>CREATE_A_MEAL.FORM.ERROR.INCORRECT_CELLPHONE</span>
                </div>
            </div>
            <div class="clear10"></div>
            <div class="row">
                <h4><em translate>CREATE_A_MEAL.FORM.NOTIFICATIONS.TITLE</em></h4>
            </div>
            <div class="clear10"></div>
            <div class="row">
                <div class="col-sm-12">
                    <div class="row" translate>CREATE_A_MEAL.FORM.NOTIFICATIONS.AUTOMATIC_BOOKING.TITLE</div>
                    <div class="row col-sm-12">
                        <div class="form-group">
                            <div class="radio">
                                <label for="automaticSubscriptionFalse" class="radio-inline"><input type="radio" [(ngModel)]="editedMeal.automaticSubscription" name="automaticSubscription" id="automaticSubscriptionFalse" ng-value="false"><span translate>CREATE_A_MEAL.FORM.NOTIFICATIONS.AUTOMATIC_BOOKING.NO</span></label>
                                <i
                                    class="fa fa-info-circle" ngbTooltip="{{'CREATE_A_MEAL.FORM.NOTIFICATIONS.AUTOMATIC_BOOKING.NO_TOOLTIP'|translate}}" tooltip-trigger="mouseenter" tooltip-placement="top"></i>
                                    <label for="automaticSubscriptionTrue" class="radio-inline" style="margin-left:10px"><input type="radio" [(ngModel)]="editedMeal.automaticSubscription" name="automaticSubscription" id="automaticSubscriptionTrue" ng-value="true"><span translate>CREATE_A_MEAL.FORM.NOTIFICATIONS.AUTOMATIC_BOOKING.YES</span></label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--
            <div class="row">
                <div ng-hide="$parent.$root.user.privateInfo.user_ref">
                    <div class="clear10"></div>
                    <div><span translate>CREATE_A_MEAL.FORM.NOTIFICATIONS.MESSENGER_1</span> <span class="small" translate>CREATE_A_MEAL.FORM.NOTIFICATIONS.MESSENGER_2</span></div>-->
                    <!--<div class="fb-messenger-checkbox" origin="{{origin}}" page_id="{{page_id}}" messenger_app_id="{{app_id}}" user_ref="{{user_ref}}" prechecked="true" allow_login="true" size="large"></div>-->
                <!--</div>
                <div class="small text-info" ng-show="$parent.$root.user.privateInfo.user_ref" translate>
                    {{' CREATE_A_MEAL.FORM.NOTIFICATIONS.MESSENGER_ALREADY '}}
                </div>
            </div>-->
            <div class="clear20"></div>
            <div class="row">
                <div class="form-group">
                    <div class="form-btn-center">
                        <a class="btn btn-md" ng-class="{'btn-facebook': !isAuthenticated(), 'btn-primary': isAuthenticated()}" ng-click="createMealForm.$setSubmitted(); createMeal()"><span translate ng-if="!isAuthenticated()">CREATE_A_MEAL.FORM.PUBLISH_NOT_CONNECTED</span><br ng-if="!isAuthenticated()"><span translate>CREATE_A_MEAL.FORM.PUBLISH</span></a>
                    </div>
                </div>
            </div>
        </fieldset>
    </form>
</div>